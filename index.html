<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Tower Defense</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="game-wrapper">
    <div class="game-window" id="gameWindow">

      <!-- ‚îÄ‚îÄ STATS BAR ‚îÄ‚îÄ -->
      <div class="stats-bar">
        <div class="stat-group">
          <div class="stat">
            <span class="stat-icon">‚ù§Ô∏è</span>
            <span class="stat-label">HP</span>
            <span id="stat-health" class="stat-val">100</span>
          </div>
          <div class="stat">
            <span class="stat-icon">üí∞</span>
            <span class="stat-label">GOLD</span>
            <span id="stat-money" class="stat-val">150</span>
          </div>
          <div class="stat">
            <span class="stat-icon">‚ò†Ô∏è</span>
            <span class="stat-label">KILLS</span>
            <span id="stat-kills" class="stat-val">0</span>
          </div>
        </div>

        <div class="title-group">TOWER DEFENSE</div>

        <div class="stat-group stat-group--right">
          <div class="stat">
            <span class="stat-label">WAVE</span>
            <span id="stat-wave" class="stat-val">1</span>
            <span class="stat-max">/ 20</span>
          </div>
          <button id="startWaveBtn" class="btn btn--start">‚ñ∂ START</button>
          <label class="auto-label">
            <input type="checkbox" id="autoWave"> AUTO
          </label>
          <button id="pauseBtn" class="btn btn--pause" title="Pause (ESC)">‚è∏</button>
          <button class="btn btn--restart restartTrigger" title="Restart">‚Ü∫</button>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ CANVAS CONTAINER ‚îÄ‚îÄ -->
      <div class="canvas-container">
        <canvas id="gameCanvas" width="900" height="460"></canvas>

        <!-- PAUSE OVERLAY -->
        <div id="pauseOverlay" class="pause-overlay">
          <div class="pause-card">
            <div class="pause-title">PAUSED</div>
            <div class="pause-hint">Press <kbd>ESC</kbd> or tap ‚è∏ to resume</div>
            <div class="pause-actions">
              <button class="btn btn--resume" onclick="document.getElementById('pauseBtn').click()">‚ñ∂ Resume</button>
              <button class="btn btn--restart-lg restartTrigger">‚Ü∫ Restart</button>
            </div>
          </div>
        </div>

        <!-- TOWER SIDEBAR -->
        <div id="towerSidebar" class="tower-sidebar">
          <button class="sb-close" id="sbCloseBtn" title="Deselect">‚úï</button>

          <div class="sb-header">
            <div id="sb-name" class="sb-name">Tower</div>
            <div id="sb-level" class="sb-level">Level 1</div>
          </div>

          <div class="sb-divider"></div>

          <div class="sb-stats">
            <div class="sb-stat">
              <span class="sb-stat-label">RANGE</span>
              <span id="sb-range" class="sb-stat-val">‚Äî</span>
            </div>
            <div class="sb-stat">
              <span class="sb-stat-label">DAMAGE</span>
              <span id="sb-dmg" class="sb-stat-val">‚Äî</span>
            </div>
            <div class="sb-stat">
              <span class="sb-stat-label">FIRE RATE</span>
              <span id="sb-rate" class="sb-stat-val">‚Äî</span>
            </div>
          </div>

          <div class="sb-divider"></div>

          <div class="sb-actions">
            <button id="upBtn" class="btn btn--upgrade-sb">‚¨Ü Upgrade</button>
            <button id="sellBtn" class="btn btn--sell-sb">Sell</button>
          </div>

          <div class="sb-hint">Tap elsewhere to deselect</div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ HUD ‚îÄ‚îÄ -->
      <div class="hud">
        <div class="hud-section hud-towers">
          <span class="hud-label">PLACE TOWER</span>
          <div class="tower-row">
            <button class="towerBtn selected" data-type="cannon">
              <span class="tb-icon">üí£</span>
              <span class="tb-name">Cannon</span>
              <span class="tb-cost">$50</span>
              <span class="tb-tip">Splash ¬∑ Mid range</span>
            </button>
            <button class="towerBtn" data-type="sniper">
              <span class="tb-icon">üéØ</span>
              <span class="tb-name">Sniper</span>
              <span class="tb-cost">$70</span>
              <span class="tb-tip">High dmg ¬∑ Long range</span>
            </button>
            <button class="towerBtn" data-type="rapid">
              <span class="tb-icon">‚ö°</span>
              <span class="tb-name">Rapid</span>
              <span class="tb-cost">$45</span>
              <span class="tb-tip">Fast fire ¬∑ Short range</span>
            </button>
            <button class="towerBtn" data-type="freeze">
              <span class="tb-icon">‚ùÑÔ∏è</span>
              <span class="tb-name">Freeze</span>
              <span class="tb-cost">$85</span>
              <span class="tb-tip">AOE slow ¬∑ Lv3 vs Elite</span>
            </button>
            <button class="towerBtn" data-type="fire">
              <span class="tb-icon">üî•</span>
              <span class="tb-name">Fire</span>
              <span class="tb-cost">$60</span>
              <span class="tb-tip">Damage over time</span>
            </button>
            <button class="towerBtn" data-type="tesla">
              <span class="tb-icon">üîó</span>
              <span class="tb-name">Tesla</span>
              <span class="tb-cost">$180</span>
              <span class="tb-tip">Chain √ó2‚Üí4 ¬∑ Fast fire</span>
            </button>
            <button class="towerBtn" data-type="mortar">
              <span class="tb-icon">üí•</span>
              <span class="tb-name">Mortar</span>
              <span class="tb-cost">$250</span>
              <span class="tb-tip">Huge splash ¬∑ Long arc</span>
            </button>
          </div>
        </div>
      </div>

    </div><!-- /game-window -->
  </div><!-- /game-wrapper -->

  <script src="game.js"></script>
  <script>
    // ‚îÄ‚îÄ Close sidebar button ‚îÄ‚îÄ
    document.getElementById("sbCloseBtn").addEventListener("click", () => {
      selectedTower = null;
      if (typeof updatePanel === "function") updatePanel();
    });

    // ‚îÄ‚îÄ Responsive scaling ‚îÄ‚îÄ
    function scaleGame() {
      const gw   = document.getElementById("gameWindow");
      const avail = Math.min(window.innerWidth, window.innerHeight < 600 ? window.innerWidth : window.innerWidth);
      const scale = Math.min(1, avail / 916); 
      gw.style.transform       = scale < 1 ? `scale(${scale})` : "";
      gw.style.transformOrigin = "top center";
      // Adjust wrapper height so scaled element doesn't overlap page footer
      document.querySelector(".game-wrapper").style.minHeight =
        scale < 1 ? `${gw.offsetHeight * scale}px` : "";
    }
    window.addEventListener("resize", scaleGame);
    // Wait for fonts/layout to settle before first scale
    window.addEventListener("load", scaleGame);
    scaleGame();
  </script>
</body>
</html>